#include "ToolBoxItem.h"

#include "ToolBoxItemHeader.h"

#include <QDebug>
#include <QVBoxLayout>


//===================================================================================================================================================================================================//
// PUBLIC
//===================================================================================================================================================================================================//

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
ToolBoxItem::ToolBoxItem(QWidget* widget, const QString& text, QWidget* parent) :
  QWidget(parent)
{
  header = new ToolBoxItemHeader(text, this);
  
  content = widget;
  content->setObjectName("ToolBoxItemContent");
  content->setStyleSheet("QFrame#ToolBoxItemContent{border-top: 1px solid transparent}");

  setMinimumHeight(content->height() + header->height());

  QVBoxLayout* layout = new QVBoxLayout(this);
  layout->setMargin(0);
  layout->setSpacing(0);
  layout->addWidget(header);
  layout->addWidget(content);

  connect(header, &ToolBoxItemHeader::clicked, this, &ToolBoxItem::hideContent);
}


//===================================================================================================================================================================================================//
// PRIVATE SLOTS
//===================================================================================================================================================================================================//

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
void ToolBoxItem::hideContent(bool minimized)
{
  if (!minimized)
  {
    content->hide();
    setFixedHeight(header->height());
  }
  else
  {
    setFixedHeight(content->height() + header->height());
    content->show();
  }

  emit sizeChanged();
}