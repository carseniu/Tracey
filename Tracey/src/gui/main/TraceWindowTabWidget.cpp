#include "src/gui/main/TraceWindowTabWidget.h"

#include <QDragEnterEvent>
#include <QDropEvent>
#include <QMimeData>


//===================================================================================================================================================================================================//
// PUBLIC
//===================================================================================================================================================================================================//

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
TraceWindowTabWidget::TraceWindowTabWidget(QWidget* parent) :
  TraceTabWidget(parent)
{
  setAcceptDrops(true);
}


//===================================================================================================================================================================================================//
// PROTECTED
//===================================================================================================================================================================================================//

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
void TraceWindowTabWidget::dragEnterEvent(QDragEnterEvent* event)
{
  if (event->mimeData()->hasUrls())
  {
    event->acceptProposedAction();
  }
}

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
void TraceWindowTabWidget::dragMoveEvent(QDragMoveEvent* event)
{
  if (event->mimeData()->hasUrls())
  {
    event->acceptProposedAction();
  }
}

//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
//---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//
void TraceWindowTabWidget::dropEvent(QDropEvent* event)
{
  QList<QUrl> paths = event->mimeData()->urls();

  emit fileDropped(paths.at(0).toLocalFile());
}